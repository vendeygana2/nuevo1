<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistema de Ventas</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Arial', sans-serif; }
    body {
      background: linear-gradient(to bottom, #1e1e2f, #3b3b5c);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
      font-size: 28px;
      text-align: center;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
      width: 100%;
      max-width: 500px;
    }
    .servicio {
      background-color: #ffffff10;
      padding: 15px;
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      border: 1px solid #ffffff22;
      transition: background 0.3s;
    }
    .servicio:hover {
      background-color: #ffffff25;
    }
    #formulario, #mensaje {
      width: 100%;
      max-width: 400px;
      margin-top: 30px;
      background: #ffffff10;
      padding: 20px;
      border-radius: 15px;
      display: none;
    }
    label {
      display: block;
      margin-bottom: 10px;
      font-size: 14px;
    }
    input, select, button {
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }
    button {
      background-color: #00c896;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    #mensaje {
      text-align: center;
      padding: 15px;
    }
  </style>
</head>
<body>

  <h1>Compra tu cuenta digital</h1>

  <div class="grid">
    <div class="servicio" onclick="mostrarFormulario('Netflix')">Netflix</div>
    <div class="servicio" onclick="mostrarFormulario('Amazon')">Amazon</div>
    <div class="servicio" onclick="mostrarFormulario('Disney')">Disney</div>
  </div>

  <div id="formulario">
    <h3>Formulario de Compra</h3>
    <form id="formCompra">
      <input type="hidden" name="servicio" id="servicio" />
      <label>Cédula:
        <input type="text" name="cedula" required />
      </label>
      <label>Teléfono:
        <input type="text" name="telefono" required />
      </label>
      <label>Tipo de Cuenta:
        <select name="tipoCuenta" required>
          <option>Cuenta Completa</option>
          <option>Pantalla</option>
          <option>Perfil</option>
        </select>
      </label>
      <button type="submit">Comprar</button>
    </form>
  </div>

  <div id="mensaje"></div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbyDj_Wgy-zhkKt3bKFMRiKZLUra4id3eNJWh6Y0_h3E2f0UVWb9jYh9H_0w7y-cpMvA/exec";

    function mostrarFormulario(servicio) {
      document.getElementById('formulario').style.display = 'block';
      document.getElementById('servicio').value = servicio;
      document.getElementById('mensaje').style.display = 'none';
    }

    document.getElementById('formCompra').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());

      fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(response => response.json())
      .then(res => {
        const mensajeDiv = document.getElementById('mensaje');
        mensajeDiv.style.display = 'block';
        if (res.estado === "ok") {
          mensajeDiv.style.backgroundColor = "#d4edda";
          mensajeDiv.style.color = "#155724";
          mensajeDiv.innerHTML = `
            <strong>¡Compra exitosa!</strong><br/>
            Usuario: <code>${res.usuario}</code><br/>
            Contraseña: <code>${res.contraseña}</code>
          `;
        } else {
          mensajeDiv.style.backgroundColor = "#f8d7da";
          mensajeDiv.style.color = "#721c24";
          mensajeDiv.innerText = res.mensaje;
        }
      })
      .catch(() => {
        const mensajeDiv = document.getElementById('mensaje');
        mensajeDiv.style.display = 'block';
        mensajeDiv.style.backgroundColor = "#f8d7da";
        mensajeDiv.style.color = "#721c24";
        mensajeDiv.innerText = "Error al enviar la solicitud.";
      });
    });
  </script>
</body>
</html>
